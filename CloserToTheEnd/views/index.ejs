<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content ="width=device-width,initial-scale=1,user-scalable=yes"/>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src = "/socket.io/socket.io.js"></script>

<link href="https://fonts.googleapis.com/css2?family=Cabin:wght@500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Cabin:wght@400;500;700&family=Delius+Unicase:wght@700&family=Open+Sans:wght@300&display=swap" rel="stylesheet">      

<link rel="stylesheet" type="text/css" href="css/index.css">  
<script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
<script src="scripts/main.js"></script>
<!--<script src="call.js"></script>-->

   </head>
  

   
   <link href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAABwwNAG3e9wDj8m0Aqef1AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACIiIiIjAAAAISIhISMwAAAhIiEhIzMAACEiISEjMzAAIRERISMzMAAhIiEhIzMwACEiISIjMzAAISIhISMzMAAiIiIiIzMwAAREREREMzAAAERERERDMAAABEREREQwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//wAAgB8AAIAPAACABwAAgAMAAIADAACAAwAAgAMAAIADAACAAwAAwAMAAOADAADwAwAA//8AAP//AAD//wAA" rel="icon" type="image/x-icon" />
   <title>Chatterbox</title>
</head>




    <body>
        <div class="container-fluid">
            <div class="row">
              <div class="col-sm-2" id="user" >
                <h2 id="username" class="text-center"><%= name %></h2>
                <script src="scripts/javanewindex.js"></script>
                <hr>
                <div class="AboutMe">
                
                    <div class="profileimage text-center" >
                        
                      <form 
                      action='/profile' 
                      method='post' 
                      encType="multipart/form-data">
                    <label for="filephoto" style="cursor: pointer;">
                        
                        <img id="photoimage" class="img-circle" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAANlBMVEX////Fx8nBw8Xd3uDi4+TGyMr6+vry8/PLzc/t7u7k5ebg4eL39/jo6erJy8309PXY2dvR09QXDCJbAAAEXElEQVR4nO2d2XarMAxFy1CmMOX/f/ZC4FKSUIJtCR26zn7qQxdlL8uyLWz364sQQgghhBBCLkWWN9UtSZJb1eSZ9ctIkzV9EQ9EE+OPRd/8Gc0uaRe3NXHcJp31ywlQtVt2i2VbWb9gGFm/pzdL9teN1iN+l3ZMj/k9HFPrl/Wg2+1/b4rt5XLOzcXv4XizfmU3ClfBQbGwfmkHame9idr6xY+Suzfg3Iyl9asfo/QVvIpigOA1FL1DdFbMrQU+kYUJDoro6eY7UHDAWmGfe7hgdLeW2KMKjdER5ElqcCecFXG7YiEiGEWw87dGpgmHRkRd+Av5jYrWKtvc5AyjxFpmE6kYHYFsxFRQELMRRQURZzZBS4p34sZa6A2J+doavDFRtgmHRkSroYqN9gtoo750kOItMcSbEG1IDKxdbBpilWwqccEowlom9gqGWB1RamW45tta6gn5bgiWaoTKFy+GSMWMWsUQqTisMFiADRfCC4vZEGl5QUMa0tCev59LdcZDqC02KoZQdQwFQax5qUIRA63aligY9tZST8iX2rAGC5XlE9Ti6UtkD8Yr1kovyHdErG6oMG+DmtE8EBYEGw1HpMMULUjFp6ZQRZoZ2ZIp1oRmQjTXgA33M62gIVa9+z+CjYjZhJILDMReOCKWTrFW92sSIUW8sXBBJtlgppkJkTjFjdERgW3QyJugRw4eqtwB6+P2BqGTN9SBYkVYtkHOMgshipcQDFFsrV/9KHe/dHOlU6ReGTUGnsq841EhRl1P/EbtdFh9PK4OVgA+gNN59audVZ/IDiec+A71qdCB/JBjXADW1Q7z2TG+X9lvJEt3ck78nV41Pp+o0/vGJUNxXKTXy5+/k1d98bgf6kFU9NXVg3ObrK67uv4TgUkIIYQQQsCp87KpqtSdqmrKHHu1sVo/HFjab6wWodcdZVJ4em27FgnUvrayF7T7sexBJDsNvUXS/ntw6XHLpZNkYduQpWNl28uxtXPslNtvcSyMYjX8k/1xR4vPUuVpehOnh6rU9qfDxCffq3RSD3xSPPMLse89waGcNmlVOU95hLM2f5sJnqXY2Qmes6tP5QoMB0X9jx4KR7icUN81pXFY1A3lvYsO/9FBC93LTVVOpbuievRS47IkdxQnNwqnfX1Q3B9mrbagJSh5jW4YWnvEMGJ0ROmAqciF6zIojRjWs5k1KjMblVt2fFE56a1xNaI/GqUppCZUyTVQQaoSphr3s4QgX3rDmJL+ID85xQpShY5oWH7aRrwoBTShmRBfYKAlGvlUY1+feUW6XoOWSuWTqbXPBsKGaIlGfrig4fnQkIY0tIeGNKShPTSkIQ3toSENafjy13yPyXx45t5DTzWsygHhD6jx+My9zR9nGk7lZ2nD8Zl72wRpSEMa0pCGNKQhDWlIQxrSkIY0pCENaUhDGtKQhjSkIQ1pSEMa0pCGNKTh74aygucbJnvUH3/Dg4fhp18ghBBCCCGEkJP4B3ymXHSpa16yAAAAAElFTkSuQmCC" />
                        </label>
                        
                        <input id="filephoto"  name="photofile" type="file" style="display: none;"  /><!-- accept="image/*" onchange="getImage(event)"-->
                        <input type="submit" value="submit"> 
                        </form> 
                    </div> 
                   
                    <form class="info-form" action="/" method="POST" >
                    <p style="font-weight:500;"> Gender: </p>
                  
                      <input type="text" class="gender" name="Gender" id="Gender" list="genders" />
                      <datalist id="genders" >
                      <option>Man</option>
                      <option>Woman</option>
                      <option>Other</option>
                      
                      </datalist>
                    <p style="font-weight:500;">  Age:</p>
                    <input type="number" id="age" name="age" min="1" max="99">
                    <!--<input type="submit">-->
                    <p style="font-weight:500;">  I come from:</p>
                    <input type="text"  name="country" id="country" name="country">
                    <p style="font-weight:500;"> Study/Work:</p>
                    <textarea rows="2" cols="20" wrap="hard" id="study" name="study" style="width: 100%;" ></textarea>
                    <p style="font-weight:500;"> Interests/Hobbies:</p>
                    <textarea rows="2" cols="20" wrap="hard" name="interests" id="interests" style="width: 100%;" ></textarea>
                  <!-- <input type="button" value="Save" onclick="saveInfo();">-->
                   <br><button id="submitInfo" class="btn btn4" type="submit" >Submit</button><br>
                  </form>
                    
                    



                    
                    
                
                
                </div>
                    <hr>
                    <div class="status">
                    <!--<form method="POST" action="/send">-->
                    <div class="online"><input type="radio" id="online" class="online" name="status" value="online" onclick="setOnline()" checked> 
                    <label for="online" class="status" style="font-family: 'Open Sans', sans-serif;">Available</label></div>
                    <div class="offline"><input type="radio" id="offline" class="offline" name="status" value="offline" onclick="setOffline()"> 
                    <label for="offline" class="status" style="font-family: 'Open Sans', sans-serif; ">Busy</label></div>
                    <!--<button class="submit" type="submit" value="Submit">Enter</button>-->
                    <!--</form>-->
                </div>
               
              </div>
            
              <div class="col-sm-8" id="messageExchange" >
               
                <div class="buttonsup" >
                    
                    <input type="button" class="settings" id="Settings" value="Settings" >
                    <label for="Settings" id="SETTINGS" class="Label"><i class="material-icons"  data-toggle="modal" data-target="#myModal">settings</i></label>
                    <input type="button" class="call" id="Call" value="Call">
                    <label for="Call" id="CALL" class="Label"><i class="material-icons" onclick="voicecall()" data-toggle="modal" data-target="#myCall">call</i></label>
                    <input type="button" class="videocall" id="Videocall" value="Videocall">
                    <label for="Videocall" id="VIDEOCALL" class="Label" onclick="videocall()" data-toggle="modal" data-target="#myVideo"><i class="material-icons">video_call</i></label>
                </div>   
                <hr>
                <div class="messagebox grid-container" id="Messagebox"> 
                    
                        
                    <div id="mylist" class="grid-item"></div>
                    <div id="userslist" class="grid-item"></div>
                </div>
                
                
                <!--<div id = "error-container"></div>
                  <div id="chatting">
                  <input id = "name" type = "text" name = "name" value = "" 
                     placeholder = "Enter your name!">
                  <button type = "button" name = "button" onclick = "setUsername()">
                     Let me chat!
                  </button>
                  </div> -->
                  <audio id="myAudio" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg" type="audio/ogg">
                   
                    Your browser does not support the audio element.
                  </audio>
                <textarea rows="2" cols="20" wrap="hard" class= "text" id="typewrite" onkeypress="enterMessage();" onkeydown="typing()" onkeyup="notTyping();"placeholder="Write a message..." value="" style="width: 100%;" ></textarea><br>
                <div class="buttonsdown"> 
                  <form ref='uploadForm' 
                  id='uploadForm' 
                  action='http://localhost:3000/upload' 
                  method='post' 
                  encType="multipart/form-data">
                <input type="file" name="file" id="files" class="inputfile" />
                    <label for="files" class="Label" id="Files"><i class="material-icons">attach_file</i></label>
                    <input type="file" name="photofile" class="photofile" id="Photo" value="Photo"  ><!--accept="image/*"onchange="sendImage(event)"-->
                     <label for="Photo" class="Label" id="Photos" > <i class="material-icons">photo</i></label>
                    
                    <input type="button"   class="voice" id="voice" value="Voice">
                    <label for="voice" class="Label" id="record" onmouseup="mouseUp()" onmousedown="mouseDown()"> <i class="material-icons">mic</i></label>
                    <input type="button" onclick="sendMessage()" class="send" id= "SEND" value="Send" >
                    <label for="SEND" id="Send" class="Label"><i class="material-icons" >send</i></label>
                    <input type='submit' value='Upload!' />
                  </form>
                    <div id="audiolist">
                     </div>
                    <div id="imagelist">

                    </div>
                    <div id="proflist">
                      
                    </div>
                    
                    
                    </div>
                    <!--VIDEOKLHSH-->
                   
                   

                    <div class="modal fade" id="myVideo" role="dialog">
                      <div class="modal-dialog">
                      
                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">VideoCall</h4>
                          </div>
                          <div class="modal-body">
                            <div id="videos">
                              <video id="video1" playsinline autoplay muted></video>
                              <video id="video2" playsinline autoplay></video>
                              <video id="video3" playsinline autoplay></video>
                          
                              <div>
                                  <button id="startButton">Start</button>
                                  <button id="callButton">Call</button>
                                  <button id="hangupButton">Hang Up</button>
                              </div>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" id="videoClose"   class="btn btn-default" data-dismiss="modal">End VideoCall</button>
                          </div>
                        </div>
                        
                      </div>
                    </div>
                            
                    
                   
                    <!---->
                    <!--VOICECALL-->
                    <div class="modal fade" id="myCall" role="dialog">
                      <div class="modal-dialog">
                      
                        <!-- Modal content-->
                        <div class="modal-content">
                          <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="modal-title">VoiceCall</h4>
                          </div>
                          <div class="modal-body">
                            <div id="videos">
                            <video id="localVoice" autoplay muted></video>
                             
                            <video id="remoteVoice" autoplay></video>
                            </div>
                          </div>
                          <div class="modal-footer">
                            <button type="button" id="voiceCall"   class="btn btn-default" data-dismiss="modal">End VoiceCall</button>
                          </div>
                        </div>
                        
                      </div>
                    </div>
                    <!---->
              </div>
              
              <div class="col-sm-2" id="onlineFriends" >
                <h2 class="text-center">Online</h2>  
                <hr>      
                <div class="box" id="OnlineUsers">
                    <ul id="usersonline" class="onusers"  >
           
                    </ul>
                       
                           
                       </div> </div>
               
                       
                      
               </div>
             
                <!-- Settings -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Settings</h4>
        </div>
        <div class="modal-body">
          <b>Text size:</b>
          <input type="radio" id="small" name="size" onclick="setSmall()" checked>Small      
          <input type="radio" id="medium" name="size" onclick="setMedium()">Medium    
          <input type="radio" id="large" name="size" onclick="setLarge()">Large    
          <br><br>
          <b>Nightmode:</b> <label class="switch">
            <input type="checkbox" id="checkBox" onclick="nightMode()">
            <span class="slider round"></span>
          </label><br><br>
          <b>Sound OFF:</b> <label class="switch">
            <input type="checkbox" id="checkBoxtwo" onclick="soundOnOff()">
            <span class="slider round"></span>
          </label>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>
          
  <form action="/logout" method="GET">
    <input type="submit" value="Log out" />
</form>
          
</body>
</html>
